@{
    ViewData["Title"] = "Test Image Display";
}

<div class="container">
    <h1>Test Image Display</h1>
    
    <div class="row">
        <div class="col-md-6">
            <h3>Test 1: Direct Image Path</h3>
            <p>If you see an image below, static files are working:</p>
            <img src="/images/placeholder-recipe.jpg" alt="Test Image" style="max-width: 300px;" onerror="this.style.display='none'" />
            <div id="test1-result" class="mt-2"></div>
        </div>
        
        <div class="col-md-6">
            <h3>Test 2: Check Uploaded Images</h3>
            <p>Recent recipes with images:</p>
            <div id="recipe-images">
                @foreach (var recipe in ViewBag.RecentRecipes)
                {
                    <div class="mb-3">
                        <strong>@recipe.Title</strong><br>
                        <small>Image Path: @recipe.ImagePath</small><br>
                        @if (!string.IsNullOrEmpty(recipe.ImagePath))
                        {
                            <img src="@recipe.ImagePath" alt="@recipe.Title" style="max-width: 200px; border: 2px solid red;" onerror="this.style.display='none'" />
                            <div class="text-danger">Image failed to load</div>
                        }
                        else
                        {
                            <div class="text-muted">No image</div>
                        }
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<script>
    // Test if image loaded
    window.addEventListener('load', function() {
        const testImg = document.querySelector('img[src="/images/placeholder-recipe.jpg"]');
        const resultDiv = document.getElementById('test1-result');
        
        if (testImg && testImg.naturalWidth > 0) {
            resultDiv.innerHTML = '<span class="text-success">✓ Static files are working</span>';
        } else {
            resultDiv.innerHTML = '<span class="text-danger">✗ Static files are not working</span>';
        }
    });
</script>